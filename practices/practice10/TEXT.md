# Practice 10: AI生成コードに対するテスト設計

## 学習目標

- AI が生成したコードを「鵜呑みにしない」テスト力を身につける
- コードレビューとテスト設計を組み合わせた品質保証ができるようになる
- 意図的に仕込まれたバグを発見する力を養う

## AI生成コードの注意点

AIは一見正しいコードを生成しますが、以下のような問題を含むことがあります：

- **境界値の誤り**: `>=` と `>` の間違いなど
- **エッジケースの欠落**: 空配列、null、0件の考慮不足
- **ロジックの微妙な間違い**: 条件分岐の順序ミス
- **型の不一致**: 数値と文字列の混同

## テスト設計のアプローチ

1. **要件を理解する** - コードが何をすべきか把握する
2. **コードを読む** - 実装の意図を理解する
3. **テスト観点を洗い出す** - 正常系・異常系・境界値
4. **テストを書く** - バグが見つかるテストケースを含める
5. **バグを修正する** - テストを通して修正する

## 演習: AI生成コードのレビュー

`practices/practice10/target.ts` には、AIが生成した**予約管理システム**のコードがあります。このコードには**意図的にバグが含まれています**。

### 要件定義

- 予約は開始時間と終了時間を持つ
- 予約時間は1時間以上、8時間以下
- 営業時間は9:00〜21:00
- 同じ時間帯に重複する予約は不可
- 予約のキャンセルが可能

### 進め方

1. まず要件を読んで、テスト観点を洗い出す
2. `target.ts` のコードを読んで、怪しいポイントを見つける
3. `target.test.ts` にテストを書く（バグを発見するテストも含める）
4. テストを実行してバグを見つける
5. バグを修正してテストを通す

### ポイント

- テストを書く前に、まず要件とコードの両方を読む
- 「このコードは正しいか？」ではなく「どんな条件で壊れるか？」を考える
- バグを見つけたら、そのバグを検出するテストを書いてから修正する
