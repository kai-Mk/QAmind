# Practice 1: テストの基本構造（AAAパターン）

## 学習目標

- テストコードの基本構造（AAAパターン）を理解する
- vitestの基本的な構文（`describe`、`it`、`expect`）を使えるようになる
- テストを「なんとなく」ではなく「構造的に」書けるようになる

## AAAパターンとは？

テストコードには「お作法」があります。それが **AAAパターン** です。

| ステップ    | 意味 | やること                             |
| ----------- | ---- | ------------------------------------ |
| **Arrange** | 準備 | テストに必要なデータや状態を用意する |
| **Act**     | 実行 | テスト対象の関数やメソッドを呼び出す |
| **Assert**  | 検証 | 実行結果が期待通りかチェックする     |

### コード例

```ts
import { describe, it, expect } from 'vitest'
import { sum } from './target'

describe('sum', () => {
  it('1 + 2 は 3 になる', () => {
    // Arrange（準備）
    const a = 1
    const b = 2

    // Act（実行）
    const result = sum(a, b)

    // Assert（検証）
    expect(result).toBe(3)
  })
})
```

## vitestの基本構文

### `describe` - テストをグループ化する

関連するテストをまとめるための関数です。テスト対象の関数名やクラス名をグループ名にすることが多いです。

```ts
describe('sum', () => {
  // sum に関するテストをここにまとめる
})
```

### `it` - 1つのテストケースを定義する

「こういう条件のとき、こうなるはず」を1つずつ書きます。`test` と書いても同じ意味です。

```ts
it('正の数同士を足すと正しい結果になる', () => {
  // テストの内容
})
```

### `expect` と `toBe` - 結果を検証する

`expect(実際の値).toBe(期待する値)` で、値が一致するかチェックします。

```ts
expect(sum(1, 2)).toBe(3) // プリミティブ値の比較
```

### `toEqual` - オブジェクトの比較

オブジェクトや配列を比較するときは `toEqual` を使います。`toBe` は参照の一致を見るため、オブジェクトには使えません。

```ts
expect({ name: 'Alice' }).toEqual({ name: 'Alice' }) // OK
expect([1, 2, 3]).toEqual([1, 2, 3]) // OK
```

## 演習

`practices/practice1/target.ts` に定義されている関数に対して、テストを書いてみましょう。

`practices/practice1/target.test.ts` を開いて、AAAパターンを意識しながらテストコードを完成させてください。

### ポイント

- 各テストケースで Arrange / Act / Assert を明確に分ける
- テストケース名は「何をテストしているか」がわかるように書く
- まずは正常系（期待通りの入力）からテストを書く
