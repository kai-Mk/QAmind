# QAmind 要件定義

## アプリ概要

AIエージェントによってテストや実装が置き換えられる時代において、エンジニアに求められるのは「品質思考」である。
本アプリは、ジュニアエンジニアがテスト設計を通じて品質思考を身につけるための学習アプリである。

単にテストコードを書くのではなく、「何を守るべきか」「どうテストすべきか」を自分で判断できる力を育てる。

## 提供価値

- 要件からテスト設計を考える力
- 単体テストと結合テストを適切に使い分ける力
- AIが書いたコードの品質を見抜く力

## 対象ユーザー

- 実務1〜3年のジュニアエンジニア
- テストコード経験の浅い人、書いたことがない人
- TDD未経験者
- AIエージェントを使い始めた人
- テスト設計・品質設計に自信がない人

## 差別化ポイント

- 日本語で学習できる
- IDE完結（CLI / Claude Code上で学習が完了する）

---

## カリキュラム構成

全10問。各問にvitestの構文紹介を含め、テスト設計の観点とツールの使い方を同時に学ぶ。

### インプットフェーズ（7問）

1つの問につき1つのテスト設計観点を学ぶ。既存コードに対してテストを書く形式。

| # | 学習観点 | 題材例 | vitest構文 |
|---|---------|-------|-----------|
| 1 | テストの基本構造（AAAパターン） | `sum(a, b)` | `describe` / `it` / `expect` / `toBe` / `toEqual` |
| 2 | 境界値分析 | 年齢判定、配列の範囲 | `each` / `toBeLessThan` 等 |
| 3 | 同値分割 | 成績ランク分類 | `toContain` / `toMatch` 等 |
| 4 | 異常系・例外テスト | 不正入力のバリデーション | `toThrow` / `toThrowError` |
| 5 | 状態を持つもののテスト | カート、カウンター | `beforeEach` / `afterEach` |
| 6 | モック・スタブの使い方 | API呼び出しを含む関数 | `vi.fn()` / `vi.spyOn` / `vi.mock` |
| 7 | 結合テストの役割 | 複数モジュールの連携 | テストの分離と結合の判断 |

### 応用フェーズ（3問）

複数の観点を組み合わせ、TDD形式（要件 → テスト → 実装）で開発を行う。

| # | 学習観点 | 題材例 |
|---|---------|-------|
| 8 | 要件 → テスト観点の洗い出し | 簡単な仕様書からテスト設計 |
| 9 | 単体/結合の責務分担を自分で判断 | 注文処理のような中規模機能 |
| 10 | AI生成コードに対するテスト設計 | 意図的にバグを含むコードのレビュー |

---

## 各問の構成

```
practice{N}/
├── TEXT.md            ← 学習テキスト（観点の説明 + vitest構文の紹介 + 例）
├── questions.json     ← 選択問題（3〜5問、Inkで出題）
├── target.ts          ← テスト対象のコード（インプットフェーズ）
└── target.test.ts     ← 学習者が書くファイル（空 or 雛形）
```

- TEXT.mdに観点の解説、vitest構文の使い方、完成形の例を含める
- 選択問題はTEXT.mdの内容に対する理解度チェック
- 選択問題の内容は実装しながら段階的に作成する
- 応用フェーズでは要件のみ提示し、テスト・実装の両方を学習者が書く

---

## 学習フロー

### インプットフェーズ（1問の進め方）

1. コマンドで学習を開始する
2. TEXT.mdを読んで観点とvitest構文を学ぶ
3. Inkで選択問題に回答する（理解度チェック）
4. 演習: テストコードを書く
5. vitestを実行してテストが通ることを確認する
6. 完了（レビューなし）

### 応用フェーズ（1問の進め方）

1. コマンドで学習を開始する
2. TEXT.mdで要件を読む
3. Inkで選択問題に回答する（理解度チェック）
4. TDD形式でテスト → 実装を書く
5. vitestを実行してテストが通ることを確認する
6. レビューで添削を受ける（Claude Code利用時のみ）
7. 指摘を受けたら修正して再レビュー（最大3回）
8. レビューOKで完了

### コマンド体系

※ 詳細は別途設計する
※ Claude Code利用時はカスタムスラッシュコマンド、未使用時はシェルスクリプトで対応

### 完了条件

- インプットフェーズ: 選択問題クリア + vitest全通過
- 応用フェーズ: 選択問題クリア + vitest全通過 + レビューOK（Claude Code利用時）
- 完了時に進捗管理ファイルを更新する

### レビュー（Claude Code限定機能）

- 応用フェーズのみ実施
- 1問につき最大3回まで
- Claude Codeのカスタムスラッシュコマンドで実行する
- Claude Code未使用の場合は、各自でLLM等を利用してレビューを受ける
- レビュー時の指摘事項はミス記録ファイルに蓄積する

---

## データ管理

### 進捗管理: `progress.json`

```json
{
  "practice1": {
    "status": "completed",
    "completedAt": "2026-02-14T12:30:00Z"
  },
  "practice8": {
    "status": "completed",
    "reviewCount": 2,
    "completedAt": "2026-02-15T10:00:00Z"
  }
}
```

- `status`: `not_started` / `in_progress` / `completed`
- `reviewCount`: レビュー実施回数（応用フェーズのみ、最大3）
- `completedAt`: 完了日時（完了時のみ）

### ミス記録: `mistakes.md`

レビューで指摘された内容をMarkdown形式で蓄積する。
コード例を含めてどのようなミスだったかを記録し、振り返りに使う。

```markdown
## Practice 1: テストの基本構造

### レビュー1回目
- 指摘: AAAパターンのArrangeが不足していた
- コード例:
  \```ts
  // NG: Arrangeなしでいきなりアサーション
  expect(sum(1, 2)).toBe(3)

  // OK: 明示的にArrangeを分離
  const a = 1
  const b = 2
  const result = sum(a, b)
  expect(result).toBe(3)
  \```
```

---

## 実行環境

- テストフレームワーク: vitest
- 言語: TypeScript
- CLIフレームワーク: Ink（選択問題の出題・インタラクション）
- 実行環境: CLI / IDE（ターミナル上で完結）
- DB: なし（ファイルベースで管理）
- レビュー: Claude Code カスタムスラッシュコマンド（Claude Code利用時のみ）
- 進捗管理: ファイルベース（progress.json）
